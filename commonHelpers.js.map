{"version":3,"file":"commonHelpers.js","sources":["../src/img/favorite-exercise/favorite-dumbbell.png","../src/js/favorite-render.js","../src/js/modalTraneFav.js","../src/favMain.js"],"sourcesContent":["export default \"__VITE_ASSET__e8366165__\"","import { apiInstance } from './services/api';\nimport { btnRender } from '../js/btnRender';\nimport { hidesElementFromPage } from './elementManagement';\nimport icons from '/img/symbol-defs.svg';\nimport png from '../img/favorite-exercise/favorite-dumbbell.png';\n\nconst container = document.querySelector('.favorites-exercise-container');\nconst btnPagination = document.querySelector('.render-btn-list-pagination');\n\nconst key = 'favorites';\nlet localStorageData = null;\n\nconst bodyWidth = getComputedStyle(document.querySelector('body')).width;\nconst limit = parseInt(bodyWidth) < 768 ? 8 : 9;\nlet currentPage = 1;\nconst itemsPerPage = 8;\n\nconst getId = async idValue => {\n  try {\n    const response = await apiInstance.get(`/exercises/${idValue}`);\n    return response.data;\n  } catch (e) {\n    console.log(e);\n  }\n};\n\nconst parseLocalStorage = () => {\n  try {\n    localStorageData = JSON.parse(localStorage.getItem(key));\n  } catch (e) {\n    console.log(e);\n  }\n  return localStorageData;\n};\n\nconst ifLocalStorageClean = () => {\n  container.innerHTML = '';\n  const markupNotFound = `<div class=\"favorites-exercise-not-found-container\">\n        <img\n          class=\"favorites-exercise-img\"\n          src=\"${png}\"\n          alt=\"dumbbell\"\n        />\n        <h3 class=\"favorites-exercise-not-found\">\n          It appears that you haven't added any exercises to your favorites yet.\n          To get started, you can add exercises that you like to your favorites\n          for easier access in the future.\n        </h3>\n      </div>`;\n  container.insertAdjacentHTML('beforeend', markupNotFound);\n  hidesElementFromPage(btnPagination);\n};\n\nconst ifLocalStorageIs = result => {\n  container.innerHTML = '';\n  const markup = result.reduce(\n    (html, { _id: id, bodyPart, name, target, burnedCalories, time }) =>\n      html +\n      `\n        <li class=\"workout-card__item\">\n          <div class=\"workout-card__block\">\n            <div class=\"workout-card__block-top\">\n              <div class=\"workout-card__block_button-rating\">\n                <p class=\"workout-card__text-workout\">\n                  Workout\n                </p>\n                <div class=\"workout-card__rating-block\">\n                   <svg class=\"workout-card__basket-icon ${id}\" width=\"24\" height=\"24\">\n                    <use\n                      class=\"icon-basket ${id}\"\n                      href=\"${icons}#icon-trash\"\n                    ></use></svg>\n                </div>\n              </div>\n\n              <button class=\"workout-card__link-start\" data-id=\"${id}\">\n                Start\n                <svg class=\"workout-card__link-icon\" width=\"16\" height='16'>\n                  <use\n                    class=\"icon-arrow\"\n                    href=\"${icons}#icon-arrow\"\n                  ></use>\n                </svg>\n              </button>\n            </div>\n\n            <h3 class=\"workout-card__title\">\n              <svg class=\"workout-card__title-icon\"  width=\"24\" height=\"24\">\n                <use\n                  class=\"icon-icon\"\n                  href=\"${icons}#icon-icon\"\n                ></use>\n              </svg>\n              ${name[0].toUpperCase() + name.slice(1)}\n            </h3>\n\n            <ul class=\"workout-card__statistic_list\">\n              <li class=\"workout-card__statistic_item\">\n                <p class=\"workout-card__statistic_text\">\n                  <span class=\"secondary-color-text\">Burned calories:</span>\n                  ${burnedCalories} / ${time} min\n                </p>\n              </li>\n              <li class=\"workout-card__statistic_item\">\n                <p class=\"workout-card__statistic_text\">\n                  <span class=\"secondary-color-text\">Body part:</span>\n                  ${bodyPart}\n                </p>\n              </li>\n              <li class=\"workout-card__statistic_item\">\n                <p class=\"workout-card__statistic_text\">\n                  <span class=\"secondary-color-text\">Target:</span> ${target}\n                </p>\n              </li>\n            </ul>\n          </div>\n        </li>`,\n    ''\n  );\n\n  container.insertAdjacentHTML('beforeend', markup);\n};\n\nasync function checkLocalStorage() {\n  parseLocalStorage();\n\n  if (localStorageData !== null && limit === 8 && localStorageData.length > 8) {\n    getDataForPage(currentPage);\n  } else if (localStorageData !== null && localStorageData.length !== 0) {\n    const result = await Promise.all(\n      localStorageData.map(idValue => getId(idValue))\n    );\n    ifLocalStorageIs(result);\n    hidesElementFromPage(btnPagination);\n  } else {\n    ifLocalStorageClean();\n  }\n}\n\ncheckLocalStorage();\n\nconst deleteCard = e => {\n  e.preventDefault();\n\n  const clickedElement = e.target;\n\n  const targetSvg = e.target.closest('.icon-basket ');\n\n  if (targetSvg) {\n    const currentElementId = clickedElement.classList[1];\n\n    const newLocalStorage = localStorageData.filter(\n      id => id !== currentElementId\n    );\n    localStorage.setItem(key, JSON.stringify(newLocalStorage));\n    checkLocalStorage();\n  }\n};\n\ncontainer.addEventListener('click', deleteCard);\n\nasync function getDataForPage(pageNumber) {\n  const totalPages = Math.ceil(localStorageData.length / itemsPerPage);\n\n  btnRender(totalPages, pageNumber);\n\n  const startIndex = (pageNumber - 1) * itemsPerPage;\n  const endIndex = startIndex + itemsPerPage;\n  const idForPage = localStorageData.slice(startIndex, endIndex);\n\n  const pageData = await Promise.all(idForPage.map(id => getId(id)));\n  ifLocalStorageIs(pageData);\n}\n\nbtnPagination.addEventListener('click', e => {\n  currentPage = Number(e.target.innerHTML);\n  checkLocalStorage();\n});\n","import iziToast from 'izitoast';\nimport { openModalRating } from './modal-rating';\nimport { getElemById } from './getMarkup/addModalTraneMarkup';\n\nconst modal = document.querySelector('.modal-trane-background');\nconst openModallist = document.querySelector('.favorites-exercise-container');\n\nconst closeModal = () => {\n  modal.classList.remove('modal-trane-background-active');\n  document.removeEventListener('click', closeModalOutside);\n  document.removeEventListener('keydown', closeModalOnEscape);\n};\n\nconst closeModalOutside = event => {\n  if (event.target === event.currentTarget) closeModal();\n};\nconst closeModalOnEscape = event => {\n  if (event.key === 'Escape') closeModal();\n};\n\nconst addToFavorites = id => {\n  let favorites = JSON.parse(localStorage.getItem('favorites')) || [];\n  if (!favorites.includes(id)) {\n    favorites.push(id);\n    localStorage.setItem('favorites', JSON.stringify(favorites));\n    iziToast.success({\n      message: 'Add favorite!',\n      position: 'topCenter',\n    });\n  } else {\n    localStorage.setItem(\n      'favorites',\n      JSON.stringify(favorites.splice(1, favorites.indexOf(id)))\n    );\n    iziToast.error({\n      title: 'Error',\n      message: 'Delete in favorite',\n      position: 'topCenter',\n    });\n  }\n};\n\nconst openModal = async event => {\n  if (event.target.classList.contains('workout-card__link-start')) {\n    const itemId = event.target;\n    getElemById(itemId.dataset.id);\n    // delay function\n    const timeStop = await getElemById(itemId.dataset.id);\n    const modalCloseBtn = document.querySelector('.modal-trane-btn-close');\n    const btnRanig = document.querySelector('.modal-trane-btn-rating');\n    const btnFavorite = document.querySelector(\n      '.modal-trane-btn-add-favorites'\n    );\n    modal.classList.add('modal-trane-background-active');\n    modal.addEventListener('click', closeModalOutside);\n    addEventListener('keydown', closeModalOnEscape);\n    modalCloseBtn.addEventListener('click', closeModal);\n    btnRanig.addEventListener('click', openModalRating);\n    btnFavorite.addEventListener('click', () =>\n      addToFavorites(itemId.dataset.id)\n    );\n  }\n};\n\nopenModallist.addEventListener('click', openModal);\n","import './js/favorite-render';\nimport './js/modalTraneFav';\nimport './js/mobile.menu';\nimport { newQuote } from './js/quote';\nnewQuote();\nimport './js/change-theme';\n"],"names":["png","container","btnPagination","key","localStorageData","bodyWidth","limit","currentPage","itemsPerPage","getId","idValue","apiInstance","parseLocalStorage","e","ifLocalStorageClean","markupNotFound","hidesElementFromPage","ifLocalStorageIs","result","markup","html","id","bodyPart","name","target","burnedCalories","time","icons","checkLocalStorage","getDataForPage","deleteCard","clickedElement","currentElementId","newLocalStorage","pageNumber","totalPages","btnRender","startIndex","endIndex","idForPage","pageData","modal","openModallist","closeModal","closeModalOutside","closeModalOnEscape","event","addToFavorites","favorites","iziToast","openModal","itemId","getElemById","modalCloseBtn","btnRanig","btnFavorite","openModalRating","newQuote"],"mappings":"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"}